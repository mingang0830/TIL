# Chapter10 Instruction-Level Parallelism 요약 

--------------------------------------------
* Architectural Issues
  * 최적화된 코드 스케줄링은 현대 컴퓨터 아키텍처의 기능을 활용한다.<br/>
  이러한 머신 여러 명령어가 동시에 다른 실행 단계에 있는 파이프라인 실행을 종종 허용한다.<br/>
  일부 컴퓨터에서는 여러 명령어를 동시에 실행을 시작할 수도 있다.<br/><br/>

* 데이터 종속성
  * 명령어를 스케줄링할 때 명령어가 각 메모리 위치와 레지스터에 미치는 영향을 알아야 한다.<br/>
  true dependences은 한 명령어가 다른 명령어를 기록한 다음 위치를 읽어야 할 때 발생한다.<br/>
  Antidependences 은 읽기 후에 쓰기가 있을 때 발생하며, output dependences 은  같은 위치에 쓰기가 두 개일 때 발생한다.<br/><br/>

* 의존성 제거
  * 데이터를 저장하기 위해 추가 위치를 사용함으로써 Antidependences 와 output dependences 을 제한할 수 있다<br/>
  true dependences 은 제거될 수 없으며 코드가 예약됐을때 확실하게 존중되어야 한다.<br/><br/>

* 기본 블럭에 대한 데이터 종속성 그래프
  * 이런 그래프는 기본 블럭의 statement 중 시간 제약을 나타낸다.<br/>
  노드는 statement에 대응한다.<br/>
  d로 레이블된 n에서 m으로의 엣지는 명령어 n이 시작된 후 명령어 m이 최소한 d 클럭 사이클을 시작해야 함을 나타냅니다.<br/><br/>
  
* Prioritized Topological Orders(우선순위가 지정된 토폴로지 순서)
  * 기본 블럭에 대한 데이터 의존성 그래프는 항상 비순환적이며, 일반적으로 그래프와 일치하는 많은 topological order 가 있다.<br/>
  여러 휴리스틱 중 하나를 사용하여 주어진 그래프에 대해 선호하는 topological order 를 선택할 수 있다. 
    * 예 : 임계 경로가 가장 긴 노드를 먼저 선택<br/><br/>
  
* List Scheduling 
  * data-dependence graph 에 대한 prioritized topological order 주어지면, 그 순서 내에서 노드를 고려할 수 있다.<br/>
  그래프 엣지에서 암시하는 타이밍 제약 조건과 머신의 리소스 제약 조건과 일치하는 가장 빠른 클럭 사이클로 각 노드를 예약한다.  <br/><br/>

* 블록간 코드 동작(Interblock code motion)
  * 어떤 상황에서는 statement 가 나타나는 블록에서 선행 블록이나 후속 블록으로 명령문을 이동할 수 있다.<br/>
  원래 위치에 존재하지 않는 새로운 위치에서 명령을 병렬로 실행할 수 있는 기회가 있을 수 있다는 것이 장점이다.<br/>
  이전 위치와 새 위치 사이에 지배 관계가 없는 경우, 제어 흐름과 관계없이 정확하게 동일한 명령어 시퀀스가 실행되도록 하기 위해 특정 경로를 따라 compensation code(보상 코드) 삽입이 필요할 수 도 있다.<br/><br/>

* Do-All Loops
  * Do-All Loops 는 반복에 대한 의존성이 없기 때문에 모든 반복은 병렬로 실행될 수 있다.<br/><br/>

* Software Pipelining of Do-All Loops
  * 소프트웨어 파이프라인은 여러 명령을 한 번에 실행할 수 있는 머신의 능력을 이용하는 기술이다.<br/>
  우리는 루프의 반복이 작은 간격으로 시작되도록 예약하며, 아마도 머신 리소스에 대한 반복 간의 충돌을 피하기 위해 반복에 no-op 명령을 배치한다.<br/>
  그 결과 루프는 preamble(각 블록의 선두에 기록되는 2진 문자열), coda, 그리고 (보통) tiny inner loop 를 가지고 빠르게 실행될 수 있다.<br/><br/>

* Do-Across Loops
  * 대부분의 루프는 각 반복부터 이후의 반복까지 데이터 의존성을 갖는다. 이걸 do-across loop 라고 함.<br/><br/>

* Data-Dependence Graphs for Do-Across Loops
  * Do-Ascross 루프의 명령어 사이의 의존성을 표현하기 위해서는 엣지에 1. 요구되는 지연(기본 블록을 나타내는 그래프)과 2. 의존성을 갖는 두 명령어 사이에 흐르는 반복 횟수라는 값의 쌍으로 라벨을 붙여야 한다.<br/><br/>

* List Scheduling of Loops
  * 루프를 예약 하려면 모든 반복에 대한 하나의 일정을 선택해야 하며, 연속 반복이 시작되는 시작 간격도 선택해야 한다.<br/>
  이 알고리즘은 두 노드 사이의 가장 긴 비순환 경로의 길이를 찾아 루프에서 다양한 명령의 상대적인 스케줄에 대한 제약 조건을 얻는 것을 포함한다.<br/>
  이 비순환 경로의 길이는 시작 간격을 파라미터로 가지므로 시작 간격에 하한선을 둔다. <br/><br/>